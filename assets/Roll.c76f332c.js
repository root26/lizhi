import{d as rt,r as $,w as U,c as ot,a as B,b as w,t as P,u as X,e as N,f as at,v as ht,F as ut,g as ct,h as lt,o as A,i as dt,j as V,n as Y}from"./index.992d8aeb.js";class G{_seed(a,s){if(a===(a||0))return a;{const u=""+a;let l=0;for(let f=0;f<u.length;++f)l^=u.charCodeAt(f)|0;return l}}}var F=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},K={exports:{}};(function(d){(function(a,s,u){function l(t){var i=this,o=h();i.next=function(){var e=2091639*i.s0+i.c*23283064365386963e-26;return i.s0=i.s1,i.s1=i.s2,i.s2=e-(i.c=e|0)},i.c=1,i.s0=o(" "),i.s1=o(" "),i.s2=o(" "),i.s0-=o(t),i.s0<0&&(i.s0+=1),i.s1-=o(t),i.s1<0&&(i.s1+=1),i.s2-=o(t),i.s2<0&&(i.s2+=1),o=null}function f(t,i){return i.c=t.c,i.s0=t.s0,i.s1=t.s1,i.s2=t.s2,i}function x(t,i){var o=new l(t),e=i&&i.state,n=o.next;return n.int32=function(){return o.next()*4294967296|0},n.double=function(){return n()+(n()*2097152|0)*11102230246251565e-32},n.quick=n,e&&(typeof e=="object"&&f(e,o),n.state=function(){return f(o,{})}),n}function h(){var t=4022871197,i=function(o){o=String(o);for(var e=0;e<o.length;e++){t+=o.charCodeAt(e);var n=.02519603282416938*t;t=n>>>0,n-=t,n*=t,t=n>>>0,n-=t,t+=n*4294967296}return(t>>>0)*23283064365386963e-26};return i}s&&s.exports?s.exports=x:u&&u.amd?u(function(){return x}):this.alea=x})(F,d,!1)})(K);var Q={exports:{}};(function(d){(function(a,s,u){function l(h){var t=this,i="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},h===(h|0)?t.x=h:i+=h;for(var o=0;o<i.length+64;o++)t.x^=i.charCodeAt(o)|0,t.next()}function f(h,t){return t.x=h.x,t.y=h.y,t.z=h.z,t.w=h.w,t}function x(h,t){var i=new l(h),o=t&&t.state,e=function(){return(i.next()>>>0)/4294967296};return e.double=function(){do var n=i.next()>>>11,r=(i.next()>>>0)/4294967296,c=(n+r)/(1<<21);while(c===0);return c},e.int32=i.next,e.quick=e,o&&(typeof o=="object"&&f(o,i),e.state=function(){return f(i,{})}),e}s&&s.exports?s.exports=x:u&&u.amd?u(function(){return x}):this.xor128=x})(F,d,!1)})(Q);var Z={exports:{}};(function(d){(function(a,s,u){function l(h){var t=this,i="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^(e^e<<1))|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,h===(h|0)?t.x=h:i+=h;for(var o=0;o<i.length+64;o++)t.x^=i.charCodeAt(o)|0,o==i.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function f(h,t){return t.x=h.x,t.y=h.y,t.z=h.z,t.w=h.w,t.v=h.v,t.d=h.d,t}function x(h,t){var i=new l(h),o=t&&t.state,e=function(){return(i.next()>>>0)/4294967296};return e.double=function(){do var n=i.next()>>>11,r=(i.next()>>>0)/4294967296,c=(n+r)/(1<<21);while(c===0);return c},e.int32=i.next,e.quick=e,o&&(typeof o=="object"&&f(o,i),e.state=function(){return f(i,{})}),e}s&&s.exports?s.exports=x:u&&u.amd?u(function(){return x}):this.xorwow=x})(F,d,!1)})(Z);var tt={exports:{}};(function(d){(function(a,s,u){function l(h){var t=this;t.next=function(){var o=t.x,e=t.i,n,r;return n=o[e],n^=n>>>7,r=n^n<<24,n=o[e+1&7],r^=n^n>>>10,n=o[e+3&7],r^=n^n>>>3,n=o[e+4&7],r^=n^n<<7,n=o[e+7&7],n=n^n<<13,r^=n^n<<9,o[e]=r,t.i=e+1&7,r};function i(o,e){var n,r=[];if(e===(e|0))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[n&7]=r[n&7]<<15^e.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&r[n]===0;++n);for(n==8?r[7]=-1:r[n],o.x=r,o.i=0,n=256;n>0;--n)o.next()}i(t,h)}function f(h,t){return t.x=h.x.slice(),t.i=h.i,t}function x(h,t){h==null&&(h=+new Date);var i=new l(h),o=t&&t.state,e=function(){return(i.next()>>>0)/4294967296};return e.double=function(){do var n=i.next()>>>11,r=(i.next()>>>0)/4294967296,c=(n+r)/(1<<21);while(c===0);return c},e.int32=i.next,e.quick=e,o&&(o.x&&f(o,i),e.state=function(){return f(i,{})}),e}s&&s.exports?s.exports=x:u&&u.amd?u(function(){return x}):this.xorshift7=x})(F,d,!1)})(tt);var et={exports:{}};(function(d){(function(a,s,u){function l(h){var t=this;t.next=function(){var o=t.w,e=t.X,n=t.i,r,c;return t.w=o=o+1640531527|0,c=e[n+34&127],r=e[n=n+1&127],c^=c<<13,r^=r<<17,c^=c>>>15,r^=r>>>12,c=e[n]=c^r,t.i=n,c+(o^o>>>16)|0};function i(o,e){var n,r,c,p,M,m=[],I=128;for(e===(e|0)?(r=e,e=null):(e=e+"\0",r=0,I=Math.max(I,e.length)),c=0,p=-32;p<I;++p)e&&(r^=e.charCodeAt((p+32)%e.length)),p===0&&(M=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,p>=0&&(M=M+1640531527|0,n=m[p&127]^=r+M,c=n==0?c+1:0);for(c>=128&&(m[(e&&e.length||0)&127]=-1),c=127,p=4*128;p>0;--p)r=m[c+34&127],n=m[c=c+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,m[c]=r^n;o.w=M,o.X=m,o.i=c}i(t,h)}function f(h,t){return t.i=h.i,t.w=h.w,t.X=h.X.slice(),t}function x(h,t){h==null&&(h=+new Date);var i=new l(h),o=t&&t.state,e=function(){return(i.next()>>>0)/4294967296};return e.double=function(){do var n=i.next()>>>11,r=(i.next()>>>0)/4294967296,c=(n+r)/(1<<21);while(c===0);return c},e.int32=i.next,e.quick=e,o&&(o.X&&f(o,i),e.state=function(){return f(i,{})}),e}s&&s.exports?s.exports=x:u&&u.amd?u(function(){return x}):this.xor4096=x})(F,d,!1)})(et);var nt={exports:{}};(function(d){(function(a,s,u){function l(h){var t=this,i="";t.next=function(){var e=t.b,n=t.c,r=t.d,c=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^c,c=c-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^c,t.a=c-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,h===Math.floor(h)?(t.a=h/4294967296|0,t.b=h|0):i+=h;for(var o=0;o<i.length+20;o++)t.b^=i.charCodeAt(o)|0,t.next()}function f(h,t){return t.a=h.a,t.b=h.b,t.c=h.c,t.d=h.d,t}function x(h,t){var i=new l(h),o=t&&t.state,e=function(){return(i.next()>>>0)/4294967296};return e.double=function(){do var n=i.next()>>>11,r=(i.next()>>>0)/4294967296,c=(n+r)/(1<<21);while(c===0);return c},e.int32=i.next,e.quick=e,o&&(typeof o=="object"&&f(o,i),e.state=function(){return f(i,{})}),e}s&&s.exports?s.exports=x:u&&u.amd?u(function(){return x}):this.tychei=x})(F,d,!1)})(nt);var it={exports:{}};(function(d){(function(a,s,u){var l=256,f=6,x=52,h="random",t=u.pow(l,f),i=u.pow(2,x),o=i*2,e=l-1,n;function r(_,v,b){var y=[];v=v==!0?{entropy:!0}:v||{};var g=m(M(v.entropy?[_,E(s)]:_==null?I():_,3),y),k=new c(y),C=function(){for(var j=k.g(f),S=t,T=0;j<i;)j=(j+T)*l,S*=l,T=k.g(1);for(;j>=o;)j/=2,S/=2,T>>>=1;return(j+T)/S};return C.int32=function(){return k.g(4)|0},C.quick=function(){return k.g(4)/4294967296},C.double=C,m(E(k.S),s),(v.pass||b||function(j,S,T,O){return O&&(O.S&&p(O,k),j.state=function(){return p(k,{})}),T?(u[h]=j,S):j})(C,g,"global"in v?v.global:this==u,v.state)}function c(_){var v,b=_.length,y=this,g=0,k=y.i=y.j=0,C=y.S=[];for(b||(_=[b++]);g<l;)C[g]=g++;for(g=0;g<l;g++)C[g]=C[k=e&k+_[g%b]+(v=C[g])],C[k]=v;(y.g=function(j){for(var S,T=0,O=y.i,q=y.j,z=y.S;j--;)S=z[O=e&O+1],T=T*l+z[e&(z[O]=z[q=e&q+S])+(z[q]=S)];return y.i=O,y.j=q,T})(l)}function p(_,v){return v.i=_.i,v.j=_.j,v.S=_.S.slice(),v}function M(_,v){var b=[],y=typeof _,g;if(v&&y=="object")for(g in _)try{b.push(M(_[g],v-1))}catch{}return b.length?b:y=="string"?_:_+"\0"}function m(_,v){for(var b=_+"",y,g=0;g<b.length;)v[e&g]=e&(y^=v[e&g]*19)+b.charCodeAt(g++);return E(v)}function I(){try{var _;return n&&(_=n.randomBytes)?_=_(l):(_=new Uint8Array(l),(a.crypto||a.msCrypto).getRandomValues(_)),E(_)}catch{var v=a.navigator,b=v&&v.plugins;return[+new Date,a,b,a.screen,E(s)]}}function E(_){return String.fromCharCode.apply(0,_)}if(m(u.random(),s),d.exports){d.exports=r;try{n=require("crypto")}catch{}}else u["seed"+h]=r})(typeof self!="undefined"?self:F,[],Math)})(it);var ft=K.exports,xt=Q.exports,_t=Z.exports,vt=tt.exports,pt=et.exports,mt=nt.exports,L=it.exports;L.alea=ft;L.xor128=xt;L.xorwow=_t;L.xorshift7=vt;L.xor4096=pt;L.tychei=mt;var gt=L,wt=gt;class W extends G{constructor(a,s){super(),this.seed(a,s)}get name(){return"function"}next(){return this._rng()}seed(a,s){this._rng=a}clone(a,s){return new W(this._rng,s)}}var J=(...d)=>{const[a="default",...s]=d;switch(typeof a){case"object":if(a instanceof G)return a;break;case"function":return new W(a);case"number":case"string":return new W(wt(...s))}throw new Error(`invalid RNG "${a}"`)},yt=(d,a=0,s=1)=>()=>d.next()*(s-a)+a;function D(d){return new bt(d)}class bt{constructor(a){this.isInt=()=>{if(Number.isInteger(this.n))return this;throw new Error(`Expected number to be an integer, got ${this.n}`)},this.isPositive=()=>{if(this.n>0)return this;throw new Error(`Expected number to be positive, got ${this.n}`)},this.lessThan=s=>{if(this.n<s)return this;throw new Error(`Expected number to be less than ${s}, got ${this.n}`)},this.greaterThanOrEqual=s=>{if(this.n>=s)return this;throw new Error(`Expected number to be greater than or equal to ${s}, got ${this.n}`)},this.greaterThan=s=>{if(this.n>s)return this;throw new Error(`Expected number to be greater than ${s}, got ${this.n}`)},this.n=a}}var Mt=(d,a=0,s=1)=>(s===void 0&&(s=a===void 0?1:a,a=0),D(a).isInt(),D(s).isInt(),()=>Math.floor(d.next()*(s-a+1)+a)),Et=d=>()=>d.next()>=.5,kt=(d,a=0,s=1)=>()=>{let u,l,f;do u=d.next()*2-1,l=d.next()*2-1,f=u*u+l*l;while(!f||f>1);return a+s*l*Math.sqrt(-2*Math.log(f)/f)},jt=(d,a=0,s=1)=>{const u=d.normal(a,s);return()=>Math.exp(u())},It=(d,a=.5)=>(D(a).greaterThanOrEqual(0).lessThan(1),()=>Math.floor(d.next()+a)),Ct=(d,a=1,s=.5)=>(D(a).isInt().isPositive(),D(s).greaterThanOrEqual(0).lessThan(1),()=>{let u=0,l=0;for(;u++<a;)d.next()<s&&l++;return l}),Tt=(d,a=.5)=>{D(a).greaterThan(0).lessThan(1);const s=1/Math.log(1-a);return()=>Math.floor(1+Math.log(d.next())*s)};const St=[0,0,.6931471805599453,1.791759469228055,3.1780538303479458,4.787491742782046,6.579251212010101,8.525161361065415,10.60460290274525,12.801827480081469],zt=d=>St[d],Dt=.9189385332046727;var Ot=(d,a=1)=>{if(D(a).isPositive(),a<10){const s=Math.exp(-a);return()=>{let u=s,l=0,f=d.next();for(;f>u;)f=f-u,u=a*u/++l;return l}}else{const s=Math.sqrt(a),u=.931+2.53*s,l=-.059+.02483*u,f=1.1239+1.1328/(u-3.4),x=.9277-3.6224/(u-2);return()=>{for(var h;;){let t,i=d.next();if(i<=.86*x)return t=i/x-.43,Math.floor((2*l/(.5-Math.abs(t))+u)*t+a+.445);i>=x?t=d.next()-.5:(t=i/x-.93,t=(t<0?-.5:.5)-t,i=d.next()*x);const o=.5-Math.abs(t);if(o<.013&&i>o)continue;const e=Math.floor((2*l/o+u)*t+a+.445);if(i=i*f/(l/(o*o)+u),e>=10){const n=(e+.5)*Math.log(a/e)-a-Dt+e-(.08333333333333333-(.002777777777777778-1/(1260*e*e))/(e*e))/e;if(Math.log(i*s)<=n)return e}else if(e>=0){const n=(h=zt(e))!==null&&h!==void 0?h:0;if(Math.log(i)<=e*Math.log(a)-a-n)return e}}}}},Ft=(d,a=1)=>(D(a).isPositive(),()=>-Math.log(1-d.next())/a),Pt=(d,a=1)=>(D(a).isInt().greaterThanOrEqual(0),()=>{let s=0;for(let u=0;u<a;++u)s+=d.next();return s}),Lt=(d,a=1)=>{D(a).isInt().isPositive();const s=d.irwinHall(a);return()=>s()/a},qt=(d,a=1)=>{D(a).greaterThanOrEqual(0);const s=1/a;return()=>1/Math.pow(1-d.next(),s)};class H extends G{get name(){return"default"}next(){return Math.random()}seed(a,s){}clone(){return new H}}class R{constructor(a){this._cache={},this.next=()=>this._rng.next(),this.float=(s,u)=>this.uniform(s,u)(),this.int=(s,u)=>this.uniformInt(s,u)(),this.integer=(s,u)=>this.uniformInt(s,u)(),this.bool=()=>this.uniformBoolean()(),this.boolean=()=>this.uniformBoolean()(),this.uniform=(s,u)=>this._memoize("uniform",yt,s,u),this.uniformInt=(s,u)=>this._memoize("uniformInt",Mt,s,u),this.uniformBoolean=()=>this._memoize("uniformBoolean",Et),this.normal=(s,u)=>kt(this,s,u),this.logNormal=(s,u)=>jt(this,s,u),this.bernoulli=s=>It(this,s),this.binomial=(s,u)=>Ct(this,s,u),this.geometric=s=>Tt(this,s),this.poisson=s=>Ot(this,s),this.exponential=s=>Ft(this,s),this.irwinHall=s=>Pt(this,s),this.bates=s=>Lt(this,s),this.pareto=s=>qt(this,s),a&&a instanceof G?this.use(a):this.use(new H),this._cache={}}get rng(){return this._rng}clone(...a){return a.length?new R(J(...a)):new R(this.rng.clone())}use(...a){this._rng=J(...a)}patch(){if(this._patch)throw new Error("Math.random already patched");this._patch=Math.random,Math.random=this.uniform()}unpatch(){this._patch&&(Math.random=this._patch,delete this._patch)}_memoize(a,s,...u){const l=`${u.join(";")}`;let f=this._cache[a];return(f===void 0||f.key!==l)&&(f={key:l,distribution:s(this,...u)},this._cache[a]=f),f.distribution}}var Bt=new R,st={exports:{}};/*!
 * fireworks-js 1.4.1 by Vitalij Ryndin (https://crashmax.ru)
 * https://fireworks.js.org
 * License MIT
 */(function(d,a){(function(s,u){d.exports=u()})(F,function(){return(()=>{var s={511:(x,h,t)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.Explosion=void 0;var i=t(909);h.Explosion=class{constructor(o){var{x:e,y:n,ctx:r,hue:c,gravity:p,friction:M,brightness:m,flickering:I,lineWidth:E,explosionLength:_}=o;for(this._coordinates=[],this._alpha=1,this._x=e,this._y=n,this._ctx=r,this._gravity=p,this._friction=M,this._flickering=I,this._lineWidth=E,this._explosionLength=_;this._explosionLength--;)this._coordinates.push([e,n]);this._angle=(0,i.randomFloat)(0,2*Math.PI),this._speed=(0,i.randomInt)(1,10),this._hue=(0,i.randomInt)(c-20,c+20),this._brightness=(0,i.randomInt)(m.min,m.max),this._decay=(0,i.randomFloat)(m.decay.min,m.decay.max)}update(o){this._coordinates.pop(),this._coordinates.unshift([this._x,this._y]),this._speed*=this._friction,this._x+=Math.cos(this._angle)*this._speed,this._y+=Math.sin(this._angle)*this._speed+this._gravity,this._alpha-=this._decay,this._alpha<=this._decay&&o()}draw(){var o=this._coordinates.length-1;this._ctx.beginPath(),this._ctx.lineWidth=this._lineWidth,this._ctx.fillStyle=(0,i.hsla)(this._hue,this._brightness,this._alpha),this._ctx.moveTo(this._coordinates[o][0],this._coordinates[o][1]),this._ctx.lineTo(this._x,this._y),this._ctx.strokeStyle=(0,i.hsla)(this._hue,this._flickering?(0,i.randomFloat)(0,this._brightness):this._brightness,this._alpha),this._ctx.stroke()}}},909:(x,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.hsla=h.getDistance=h.randomInt=h.randomFloat=void 0,h.randomFloat=function(t,i){return Math.random()*(i-t)+t},h.randomInt=function(t,i){return Math.floor(t+Math.random()*(i+1-t))},h.getDistance=function(t,i,o,e){var n=Math.pow;return Math.sqrt(n(t-o,2)+n(i-e,2))},h.hsla=function(t,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return"hsla(".concat(t,", 100%, ").concat(i,"%, ").concat(o,")")}},449:function(x,h,t){var i=this&&this.__awaiter||function(e,n,r,c){return new(r||(r=Promise))(function(p,M){function m(_){try{E(c.next(_))}catch(v){M(v)}}function I(_){try{E(c.throw(_))}catch(v){M(v)}}function E(_){var v;_.done?p(_.value):(v=_.value,v instanceof r?v:new r(function(b){b(v)})).then(m,I)}E((c=c.apply(e,n||[])).next())})};Object.defineProperty(h,"__esModule",{value:!0}),h.Sound=void 0;var o=t(909);h.Sound=class{constructor(e){this._buffer=[],this.onInit=!0,this.options=Object.assign({enabled:!1,files:["explosion0.mp3","explosion1.mp3","explosion2.mp3"],volume:{min:4,max:8}},e),this.init()}init(){this.onInit&&this.options.enabled&&(this.onInit=!1,this._audioContext=new(window.AudioContext||window.webkitAudioContext),this.load())}load(){return i(this,void 0,void 0,function*(){for(var e of this.options.files){var n=yield(yield fetch(e)).arrayBuffer();this._audioContext.decodeAudioData(n).then(r=>{this._buffer.push(r)}).catch(r=>{throw r})}})}play(){if(this.options.enabled&&this._buffer.length){var e=this._audioContext.createBufferSource(),n=this._buffer[(0,o.randomInt)(0,this._buffer.length-1)],r=this._audioContext.createGain();e.buffer=n,r.gain.value=(0,o.randomFloat)(this.options.volume.min/100,this.options.volume.max/100),r.connect(this._audioContext.destination),e.connect(r),e.start(0)}else this.init()}}},668:(x,h,t)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.Trace=void 0;var i=t(909);h.Trace=class{constructor(o){var{x:e,y:n,dx:r,dy:c,ctx:p,hue:M,speed:m,traceLength:I,acceleration:E}=o;for(this._coordinates=[],this._currentDistance=0,this._x=e,this._y=n,this._sx=e,this._sy=n,this._dx=r,this._dy=c,this._ctx=p,this._hue=M,this._speed=m,this._traceLength=I,this._acceleration=E,this._totalDistance=(0,i.getDistance)(e,n,r,c);this._traceLength--;)this._coordinates.push([e,n]);this._angle=Math.atan2(c-n,r-e),this._brightness=(0,i.randomInt)(50,70)}update(o){this._coordinates.pop(),this._coordinates.unshift([this._x,this._y]),this._speed*=this._acceleration;var e=Math.cos(this._angle)*this._speed,n=Math.sin(this._angle)*this._speed;this._currentDistance=(0,i.getDistance)(this._sx,this._sy,this._x+e,this._y+n),this._currentDistance>=this._totalDistance?o(this._dx,this._dy,this._hue):(this._x+=e,this._y+=n)}draw(){var o=this._coordinates.length-1;this._ctx.beginPath(),this._ctx.moveTo(this._coordinates[o][0],this._coordinates[o][1]),this._ctx.lineTo(this._x,this._y),this._ctx.strokeStyle=(0,i.hsla)(this._hue,this._brightness),this._ctx.stroke()}}}},u={};function l(x){var h=u[x];if(h!==void 0)return h.exports;var t=u[x]={exports:{}};return s[x].call(t.exports,t,t.exports,l),t.exports}var f={};return(()=>{var x=f;Object.defineProperty(x,"__esModule",{value:!0}),x.Fireworks=void 0;var h=l(668),t=l(449),i=l(511),o=l(909);x.Fireworks=class{constructor(e){var{autoresize:n=!0,boundaries:r,brightness:c,delay:p,hue:M,mouse:m,sound:I,rocketsPoint:E,lineWidth:_,lineStyle:v="round",flickering:b=50,trace:y=3,traceSpeed:g=10,intensity:k=30,explosion:C=5,gravity:j=1.5,opacity:S=.5,particles:T=50,friction:O=.95,acceleration:q=1.05}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this._tick=0,this._timestamp=performance.now(),this._version="1.4.1",this._running=!1,this._m=!1,e instanceof HTMLCanvasElement?(this._container=e,this._canvas=e):(this._container=e,this._canvas=document.createElement("canvas"),this._container.appendChild(this._canvas)),this._ctx=this._canvas.getContext("2d"),this._sound=new t.Sound(I),this.setSize(),this.setBoundaries(Object.assign({visible:!1,x:50,y:50},r)),this.autoresize=n,this.trace=y,this.explosion=C,this.gravity=j,this.opacity=S,this.particles=T,this.friction=O,this.acceleration=q,this.flickering=b,this.intensity=k,this.traceSpeed=g,this.lineStyle=v,this.hue=Object.assign({min:0,max:360},M),this.rocketsPoint=Object.assign({min:50,max:50},E),this.lineWidth=Object.assign({explosion:{min:1,max:3},trace:{min:1,max:2}},_),this.mouse=Object.assign({click:!1,move:!1,max:1},m),this.delay=Object.assign({min:15,max:30},p),this.brightness=Object.assign({min:50,max:80,decay:{min:.015,max:.03}},c),this.autoresize&&window.addEventListener("resize",()=>this.windowResize()),this._canvas.addEventListener("mousedown",z=>{this.mouseDown(z)}),this._canvas.addEventListener("mouseup",z=>{this.mouseUp(z)}),this._canvas.addEventListener("mousemove",z=>{this.mouseMove(z)})}get isRunning(){return this._running}get version(){return this._version}start(){this._running||(this._running=!0,this.clear(),this.render())}stop(){this._running&&(this._running=!1,this.clear())}unmount(){window.removeEventListener("resize",this.windowResize),this._canvas.removeEventListener("mousedown",this.mouseDown),this._canvas.removeEventListener("mouseup",this.mouseUp),this._canvas.removeEventListener("mousemove",this.mouseMove)}pause(){this._running=!this._running,this._running&&this.render()}clear(){this._ctx&&(this._traces=[],this._explosions=[],this._ctx.clearRect(0,0,this._width,this._height))}setOptions(e){for(var[n,r]of Object.entries(e)){var c=Object.prototype.hasOwnProperty.call(this,n);if(typeof this[n]=="function")throw new Error("You cannot change the methods of the class!");c&&(typeof this[n]=="object"?Object.assign(this[n],r):this[n]=r),n==="sound"&&Object.assign(this._sound.options,r)}}setSize(){var{width:e=this._container instanceof HTMLCanvasElement?this._canvas.width:this._container.clientWidth,height:n=this._container instanceof HTMLCanvasElement?this._canvas.height:this._container.clientHeight}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._width=e,this._height=n,this._canvas.width=e,this._canvas.height=n,this.setBoundaries({width:e,height:n})}setBoundaries(e){this.boundaries=Object.assign(Object.assign({},this.boundaries),e)}useMouse(e,n){(this.mouse.click||this.mouse.move)&&(this._mx=e.pageX-this._canvas.offsetLeft,this._my=e.pageY-this._canvas.offsetTop,this._m=n)}windowResize(){this.setSize()}mouseDown(e){this.useMouse(e,this.mouse.click)}mouseUp(e){this.useMouse(e,!1)}mouseMove(e){this.useMouse(e,this._m)}render(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._timestamp;if(this._ctx&&this._running){requestAnimationFrame(r=>this.render(r)),this._ctx.globalCompositeOperation="destination-out",this._ctx.fillStyle="rgba(0, 0, 0, ".concat(this.opacity,")"),this._ctx.fillRect(0,0,this._width,this._height),this._ctx.globalCompositeOperation="lighter",this._ctx.lineCap=this.lineStyle,this._ctx.lineJoin="round",this.drawBoundaries(),this.initTrace(),this.drawTrace(),this.drawExplosion();var n=e-this._timestamp;this._timestamp=e,this._tick+=n*(this.intensity*Math.PI)/1e3}}drawBoundaries(){this.boundaries.visible&&(this._ctx.beginPath(),this._ctx.lineWidth=1,this._ctx.strokeStyle="red",this._ctx.rect(this.boundaries.x,this.boundaries.y,this.boundaries.width-2*this.boundaries.x,.5*this.boundaries.height),this._ctx.stroke())}initTrace(){this._ds=(0,o.randomInt)(this.delay.min,this.delay.max),(this._tick>this._ds||this._m&&this.mouse.max>this._traces.length)&&(this._traces.push(new h.Trace({x:this._width*(0,o.randomInt)(this.rocketsPoint.min,this.rocketsPoint.max)/100,y:this._height,dx:this._mx&&this.mouse.move||this._m?this._mx:(0,o.randomInt)(this.boundaries.x,this.boundaries.width-2*this.boundaries.x),dy:this._my&&this.mouse.move||this._m?this._my:(0,o.randomInt)(this.boundaries.y,.5*this.boundaries.height),ctx:this._ctx,hue:(0,o.randomInt)(this.hue.min,this.hue.max),speed:this.traceSpeed,acceleration:this.acceleration,traceLength:this.trace})),this._tick=0)}drawTrace(){var e=this._traces.length;for(this._ctx.lineWidth=(0,o.randomFloat)(this.lineWidth.trace.min,this.lineWidth.trace.max);e--;)this._traces[e].draw(),this._traces[e].update((n,r,c)=>{this.initExplosion(n,r,c),this._sound.play(),this._traces.splice(e,1)})}initExplosion(e,n,r){for(var c=this.particles;c--;)this._explosions.push(new i.Explosion({x:e,y:n,ctx:this._ctx,hue:r,friction:this.friction,gravity:this.gravity,flickering:(0,o.randomInt)(0,100)<=this.flickering,lineWidth:(0,o.randomFloat)(this.lineWidth.explosion.min,this.lineWidth.explosion.max),explosionLength:Math.round(this.explosion),brightness:this.brightness}))}drawExplosion(){for(var e=this._explosions.length;e--;)this._explosions[e].draw(),this._explosions[e].update(()=>{this._explosions.splice(e,1)})}}})(),f})()})})(st);const At={id:"roll",w:"full"},Xt={mt:"0",pb:"4","border-b":"","border-0":"","border-light-800":""},$t={key:0,relative:"",text:"center"},Wt={class:"-z-3",text:"center",px:"12",pb:"4","inline-block":"",border:"","border-light-800":"","bg-light-100":"",rounded:""},Rt={relative:""},Gt={mt:"16"},Nt={mt:"4"},Ht={ml:"2"},Ut={mt:"4"},Vt={ml:"2"},Yt={mt:"4"},Jt={key:0,border:"","border-light-800":"",rounded:"","py-1":""},Kt={font:"bold mono","inline-block":"",text:"center",w:"8"},Zt=rt({__name:"Roll",setup(d){const a=lt(),s=$(""),u=$([...a.value.captains]),l=$([]),f=$();window.localStorage.getItem("username")&&(s.value=window.localStorage.getItem("username"));const x=()=>{u.value=[...a.value.captains],l.value=[]};U(a,()=>{x()}),U(s,e=>{window.localStorage.setItem("username",e),x()});let h,t;const i=()=>{if(!(h&&new Date().getTime()-h<3e3)){u.value.length===0&&x(),l.value.length>0&&l.value[l.value.length-1].username===s.value&&x();for(let e=0;e<10&&u.value.length>0;e++){const r=Bt.uniformInt(0,u.value.length-1)(),c=u.value[r];if(l.value.push(c),c.username===s.value){!t&&f.value&&(t=new st.exports.Fireworks(f.value,{delay:{min:5,max:15}})),h=new Date().getTime(),t==null||t.start(),setTimeout(()=>t==null?void 0:t.stop(),3e3);break}u.value.splice(r,1)}}},o=ot(()=>{const e=u.value.length;if(e<=10)return"100.00";{let n=1;for(let r=0;r<10;r++)n*=1-1/(e-r);return(100*(1-n)).toFixed(2)}});return(e,n)=>(A(),B("div",At,[w("h2",Xt,P(X(dt)(X(a).date,"yyyy \u5E74 M \u6708 d \u65E5"))+" \u8230\u957F\u62BD\u5956 ",1),X(V)?(A(),B("div",$t,[w("div",Wt,[n[2]||(n[2]=w("h3",null,"\u5956\u54C1",-1)),w("h3",null,P(X(V).name),1),w("div",{mt:"4"},[w("div",{class:"button !border-0",onClick:i},n[1]||(n[1]=[w("a",null,"\u5341\u8FDE",-1)]))])])])):N("",!0),w("div",Rt,[X(a).captains.find(r=>r.username===s.value)?(A(),B("div",{key:0,absolute:"",top:"-24",left:"0",class:"-z-1","max-h":"100",h:"full",w:"full",ref_key:"_fw",ref:f},null,512)):N("",!0),w("div",Gt,[n[3]||(n[3]=w("span",{font:"bold"},"\u4F60\u7684\u7528\u6237\u540D",-1)),at(w("input",{type:"text",name:"contest_search",id:"contest_search",class:"p-2 ml-2 rounded-md outline-none <md:shadow-box border border-light-900","onUpdate:modelValue":n[0]||(n[0]=r=>s.value=r)},null,512),[[ht,s.value]])]),w("div",Nt,[n[4]||(n[4]=w("span",{font:"bold"},"\u5355\u62BD\u4E2D\u5956\u7387",-1)),w("span",Ht,P((100/u.value.length).toFixed(2))+" %",1),w("span",null," (\u5269\u4F59 "+P(u.value.length)+" \u4F4D\u8230\u957F)",1)]),w("div",Ut,[n[5]||(n[5]=w("span",{font:"bold"},"\u5341\u8FDE\u4E2D\u5956\u7387",-1)),w("span",Vt,P(o.value)+" %",1)]),w("div",Yt,[l.value.length?(A(),B("div",Jt,[(A(!0),B(ut,null,ct(l.value.slice(0).reverse(),(r,c)=>(A(),B("div",{key:r.uid,"p-2":"",class:Y(["border-0","border-light-800",c+1<l.value.length&&"border-b"])},[w("span",Kt,P(l.value.length-c),1),w("span",{ml:"2",class:Y([r.username===s.value&&"text-green-400 font-bold"])},P(r.username),3)],2))),128))])):N("",!0)])])]))}});export{Zt as default};
